<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIRTHA FUEL CENTER - Bill Preview</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
 <style>
    .bill-container {
    width: 58mm; /* Default preview width */
    margin: 0 auto;
    padding: 10px;
    border: 1px solid #ddd;
    font-family: monospace;
    font-size: 14px;
    background: #fff;
}

        /* Thermal printer specific styles */
      @media print {
    body {
        margin: 0;
        padding: 0;
    }

    body * {
        visibility: hidden;
    }

    #printableBill, #printableBill * {
        visibility: visible;
    }

    #printableBill {
        width: 58mm; /* Default 58mm width */
        max-width: 100%;
        margin: 0 auto;
        padding: 5px;
        font-family: monospace;
        font-size: 12px;
        line-height: 1.3;
    }

    .bill-header, .bill-footer {
        text-align: center;
        margin-bottom: 5px;
    }

    .bill-table {
        width: 100%;
        border-collapse: collapse;
    }

    .bill-table td {
        padding: 2px 0;
        font-size: 12px;
    }

    img {
        display: block;
        margin: 0 auto;
        max-width: 100%;
        height: auto;
    }

    .btn, .navbar, .sidebar, .no-print {
        display: none !important;
    }
}

@page {
    size: 58mm auto; /* Default to 58mm wide */
    margin: 0;
}


    </style>
<body>
    <div id="dashboard">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header d-flex">
                <h4 class="text-center flex-grow-1">TIRTHA FUEL CENTER</h4>
                <button class="btn-close btn-close-white mobile-only" onclick="toggleSidebar()" aria-label="Close"></button>
            </div>
            <ul class="sidebar-menu">
               
                <li><a href="creatbill.html"><i class="fas fa-file-invoice me-2"></i> Create Bill</a></li>
                <li><a href="reports.html"><i class="fas fa-chart-bar me-2"></i> Reports</a></li>
                <li><a href="index.html"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Navbar -->
            <nav class="navbar navbar-expand navbar-light navbar-custom mb-4">
                <div class="container-fluid">
                    <button class="navbar-toggler menu-toggle" type="button" onclick="toggleSidebar()">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="navbar-nav ms-auto">
                        <span class="navbar-text me-3">
                            Welcome, <strong>Admin</strong>
                        </span>
                    </div>
                </div>
            </nav>

            <!-- Bill Preview Content -->
       <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4>Bill Preview</h4>
                    <div>
                        <button class="btn btn-success me-2" onclick="printBill()">
                            <i class="fas fa-print me-1"></i> Print
                        </button>
                        <button class="btn btn-secondary" onclick="window.location.href='creatbill.html'">
                            <i class="fas fa-arrow-left me-1"></i> Back
                        </button>
                    </div>
                </div>
                
                <!-- This is the bill content that will be printed -->
                <div class="bill-container" id="printableBill">
                    <div class="bill-header">
                        <strong>TIRTHA FUEL CENTRE</strong><br>
                        KHANAMODA.BAHARAGORA<br>
                        NH-6
                    </div>
                    <table class="bill-table">
                        <tr>
                            <td>Bill No:</td>
                            <td id="preview-billno">77429-DUPLT</td>
                        </tr>
                        <tr>
                            <td>Trns ID:</td>
                            <td id="preview-transid">0000000300017965</td>
                        </tr>
                        <tr>
                            <td>Atnd ID:</td>
                            <td id="preview-attendid"></td>
                        </tr>
                        <tr>
                            <td>Veh. No:</td>
                            <td id="preview-vehicle_number">NotEntered</td>
                        </tr>
                        <tr>
                            <td>Date:</td>
                            <td id="preview-date">20/06/25</td>
                        </tr>
                        <tr>
                            <td>Time:</td>
                            <td id="preview-time">12:44:29</td>
                        </tr>
                        <tr>
                            <td>FP ID:</td>
                            <td id="preview-fp_id">1</td>
                        </tr>
                        <tr>
                            <td>Nozl No:</td>
                            <td id="preview-nozl_no">1</td>
                        </tr>
                        <tr>
                            <td>Fuel:</td>
                            <td id="preview-fuel_type">DIESEL</td>
                        </tr>
                        <tr>
                            <td>Density:</td>
                            <td id="preview-density">833.3kg/m3</td>
                        </tr>
                        <tr>
                            <td>Preset:</td>
                            <td id="preview-preset">Rs.1800</td>
                        </tr>
                        <tr>
                            <td>Rate:</td>
                            <td id="preview-rate">Rs.93.43</td>
                        </tr>
                        <tr>
                            <td>Sale:</td>
                            <td id="preview-sale">Rs.1800.00</td>
                        </tr>
                        <tr>
                            <td>Volume:</td>
                            <td id="preview-volume">19.27L</td>
                        </tr>
                    </table>
                    <div class="bill-footer">
                        THANK YOU VISIT AGAIN.<br>
                        <!-- <img src="assets/indianoil.png" alt="Company Logo" width="100%"> -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/common.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const data = JSON.parse(localStorage.getItem("billData") || '{}');
        console.log("Loaded billData:", data); // optional debug log

        document.getElementById("preview-billno").textContent = data.billno || 'NotGenerated';
        document.getElementById("preview-transid").textContent = data.transid || 'N/A';
        document.getElementById("preview-attendid").textContent = data.attendId || '';
        document.getElementById("preview-vehicle_number").textContent = data.vehicle_number || 'NotEntered';
        document.getElementById("preview-date").textContent = formatDate(data.date) || '20/06/25';
        document.getElementById("preview-time").textContent = formatTime(data.date) || '12:44:29';
        document.getElementById("preview-fp_id").textContent = data.fp_id || '1';
        document.getElementById("preview-nozl_no").textContent = data.nozl_no || '1';
        document.getElementById("preview-fuel_type").textContent = data.fuel_type || 'DIESEL';
        document.getElementById("preview-density").textContent = data.density ? data.density + ' kg/m3' : '833.3 kg/m3';
        document.getElementById("preview-preset").textContent = data.sale || '0.00';
        document.getElementById("preview-rate").textContent = data.rate_per_litre ? 'Rs.' + data.rate_per_litre : 'Rs.93.43';
        document.getElementById("preview-sale").textContent = data.sale ? 'Rs.' + parseFloat(data.sale).toFixed(2) : 'Rs.1800.00';
        document.getElementById("preview-volume").textContent = data.volume || '0.00';
    });

    function formatDate(dateStr) {
        if (!dateStr) return '';
        const d = new Date(dateStr);
        return `${String(d.getDate()).padStart(2, '0')}/${String(d.getMonth() + 1).padStart(2, '0')}/${String(d.getFullYear()).slice(-2)}`;
    }

    function formatTime(dateStr) {
        if (!dateStr) return '';
        const d = new Date(dateStr);
        return `${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}:${String(d.getSeconds()).padStart(2, '0')}`;
    }

    function printBill() {
        window.print();
    }
</script>

</body>
</html>